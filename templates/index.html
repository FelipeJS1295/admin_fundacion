{% extends "layouts/base.html" %}
{% block content %}
<h2 class="text-xl font-semibold mb-4">Resumen del mes</h2>

<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
  <div class="rounded-2xl p-5 bg-slate-900 border border-slate-800">
    <div class="text-slate-400 text-sm">Entradas</div>
    <div class="text-2xl font-bold mt-1">${{ "%.0f"|format(total_entradas_mes or 0) }}</div>
  </div>
  <div class="rounded-2xl p-5 bg-slate-900 border border-slate-800">
    <div class="text-slate-400 text-sm">Salidas</div>
    <div class="text-2xl font-bold mt-1">${{ "%.0f"|format(total_salidas_mes or 0) }}</div>
  </div>
  <div class="rounded-2xl p-5 bg-slate-900 border border-slate-800">
    <div class="text-slate-400 text-sm">Balance</div>
    <div class="text-2xl font-bold mt-1">${{ "%.0f"|format(balance_mes or 0) }}</div>
  </div>
</div>

<h3 class="text-lg font-semibold mb-3">Últimos movimientos</h3>
<div class="overflow-x-auto rounded-2xl border border-slate-800">
  <table class="min-w-full text-sm">
    <thead class="bg-slate-900 text-slate-300">
      <tr>
        <th class="px-3 py-2 text-left">Fecha</th>
        <th class="px-3 py-2 text-left">Tipo</th>
        <th class="px-3 py-2 text-left">Monto</th>
        <th class="px-3 py-2 text-left">Categoría</th>
        <th class="px-3 py-2 text-left">Descripción</th>
      </tr>
    </thead>
    <tbody>
      {% for t in ultimos %}
      <tr class="border-t border-slate-800">
        <td class="px-3 py-2">{{ t.fecha }}</td>
        <td class="px-3 py-2">
          <span class="px-2 py-0.5 rounded-full text-xs
            {{ 'bg-emerald-900/40 text-emerald-200 border border-emerald-700/40' if t.tipo=='entrada'
               else 'bg-rose-900/40 text-rose-200 border border-rose-700/40' }}">
            {{ t.tipo }}
          </span>
        </td>
        <td class="px-3 py-2">${{ "%.0f"|format(t.monto) }}</td>
        <td class="px-3 py-2">{{ t.categoria.nombre if t.categoria else '-' }}</td>
        <td class="px-3 py-2">{{ t.descripcion or '' }}</td>
      </tr>
      {% else %}
      <tr><td class="px-3 py-4 text-slate-400" colspan="5">Sin movimientos aún.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
