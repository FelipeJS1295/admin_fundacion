{% extends "layouts/base.html" %}
{% block page_title %}Productos{% endblock %}
{% block page_actions %}
  <a href="/inventario/productos/nuevo" class="px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white text-sm">+ Nuevo</a>
{% endblock %}
{% block content %}
<form method="get" class="mb-4 flex gap-2">
  <input type="text" name="q" value="{{ q }}" placeholder="Buscar nombre o SKU..." class="px-3 py-2 rounded-lg bg-slate-900 border border-slate-700 w-72" />
  <button class="px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 hover:bg-slate-700 text-sm">Filtrar</button>
</form>

<div class="overflow-hidden rounded-xl border border-slate-800">
  <table class="min-w-full text-sm">
    <thead class="bg-slate-900/60 text-slate-300">
      <tr>
        <th class="px-3 py-2 text-left">SKU</th>
        <th class="px-3 py-2 text-left">Nombre</th>
        <th class="px-3 py-2 text-left">Categoría</th>
        <th class="px-3 py-2 text-left">Unidad</th>
        <th class="px-3 py-2 text-left">Mín.</th>
        <th class="px-3 py-2 text-left">Lote/Serie</th>
        <th class="px-3 py-2"></th>
      </tr>
    </thead>
    <tbody>
      {% for p in productos %}
      <tr class="border-t border-slate-800">
        <td class="px-3 py-2">{{ p.sku or '-' }}</td>
        <td class="px-3 py-2">{{ p.nombre }}</td>
        <td class="px-3 py-2">{{ p.categoria.nombre if p.categoria else '-' }}</td>
        <td class="px-3 py-2">{{ p.unidad.nombre if p.unidad else '-' }}</td>
        <td class="px-3 py-2">{{ p.stock_minimo }}</td>
        <td class="px-3 py-2">{{ 'L' if p.track_lote else '-' }}{{ ' / S' if p.track_serie else '' }}</td>
        <td class="px-3 py-2 text-right">
          <a class="text-emerald-400 hover:underline" href="/inventario/productos/{{ p.id }}/editar">Editar</a>
          <form method="post" action="/inventario/productos/{{ p.id }}/eliminar" class="inline" onsubmit="return confirm('¿Eliminar producto?');">
            <button class="ml-3 text-rose-400 hover:underline">Eliminar</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="7" class="px-3 py-6 text-center text-slate-400">Sin registros.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
